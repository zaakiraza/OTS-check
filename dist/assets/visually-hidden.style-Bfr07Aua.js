var f=()=>typeof document<"u",s=!1,i=null,n=!1,u=!1,a=new Set;function d(e,t){a.forEach(o=>o(e,t))}var p=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function m(e){return!(e.metaKey||!p&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function c(e){n=!0,m(e)&&(i="keyboard",d("keyboard",e))}function r(e){if(i="pointer",e.type==="mousedown"||e.type==="pointerdown"){n=!0;const t=e.composedPath?e.composedPath()[0]:e.target;let o=!1;try{o=t.matches(":focus-visible")}catch{}if(o)return;d("pointer",e)}}function y(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function w(e){y(e)&&(n=!0,i="virtual")}function v(e){e.target===window||e.target===document||e.target instanceof Element&&e.target.hasAttribute("tabindex")||(!n&&!u&&(i="virtual",d("virtual",e)),n=!1,u=!1)}function E(){n=!1,u=!0}function l(){return i!=="pointer"}function h(){if(!f()||s)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...o){n=!0,e.apply(this,o)},document.addEventListener("keydown",c,!0),document.addEventListener("keyup",c,!0),document.addEventListener("click",w,!0),window.addEventListener("focus",v,!0),window.addEventListener("blur",E,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",r,!0),document.addEventListener("pointermove",r,!0),document.addEventListener("pointerup",r,!0)):(document.addEventListener("mousedown",r,!0),document.addEventListener("mousemove",r,!0),document.addEventListener("mouseup",r,!0)),s=!0}function g(e){h(),e(l());const t=()=>e(l());return a.add(t),()=>{a.delete(t)}}const L={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};export{g as t,L as v};
