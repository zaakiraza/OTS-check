import{r,v as H,e as M,w as q,q as V,j as e,B as n,H as J,V as X,F as Y,T as l,g as S,s as $}from"./index-BK1bU2bz.js";import{G as K,a as Q,b as Z,c as ee}from"./index-DCMqzWIr.js";import{F as oe}from"./index-DwK6vdq7.js";import{B as se}from"./BOX-CozHWWeK.js";import{G as j,h as te,g as re,O as ne}from"./oauthConfig-CU22yB20.js";import{F as C}from"./form-control-Bp5uebuv.js";import{F as y}from"./form-label-6_09-6oI.js";import{I,b as R,a as ae}from"./input-element-CVDJCgEx.js";import{I as E}from"./input-lBRgIHT7.js";import{C as ie}from"./checkbox-CcSLJvEw.js";import{C as le}from"./center-Zpce6yHc.js";import{D as L}from"./divider-BaZMI-1_.js";import"./use-form-control-Bfrk_d33.js";import"./visually-hidden.style-Bfr07Aua.js";const Le=({handleRegister:pe})=>{const[d,G]=r.useState(!1),c=()=>G(!d),[g,u]=r.useState(""),[b,h]=r.useState(""),[k,z]=r.useState(!1),[_,m]=r.useState(!1),[v,p]=r.useState(!1),{getEnrollmentsByStudentId:f}=H(),x=M(),{loginUser:O,userLoginToken:xe,loginUserInfo:de,setLoginUserInfo:A,setUserLoginToken:T}=q(),a=V(),W=()=>{x("/signup")},[me,U]=r.useState(!1);r.useEffect(()=>{const s=()=>{if(window.google)t();else{const o=document.createElement("script");o.src="https://accounts.google.com/gsi/client",o.async=!0,o.defer=!0,o.onload=t,document.head.appendChild(o)}},t=()=>{window.google&&j.clientId&&window.google.accounts.id.initialize({client_id:j.clientId,callback:D,auto_select:!1,cancel_on_tap_outside:!0})};s()},[]);const D=async s=>{try{p(!0);const t=await $.post("http://localhost:5003/auth/google/signin",{idToken:s.credential});if(t.data.success){const{user:o,token:i}=t.data.data;A(o),T(i),localStorage.setItem("userToken",i),localStorage.setItem("userInfo",JSON.stringify(o)),localStorage.setItem("userId",o.id),console.log(o),a({title:"Login Successful",description:`Welcome, ${o.firstName||o.username}!`,status:"success",duration:5e3,isClosable:!0}),(await f(o.id,i)).status===!1?x("/explore/category"):window.open("/dashboard","_blank")}else a({title:"Login Failed",description:t.data.message||"Google login failed",status:"error",duration:5e3,isClosable:!0})}catch(t){console.error("Google login error:",t),a({title:"Login Error",description:"An error occurred during Google login. Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{p(!1)}},N=()=>{te(a)&&B()},B=()=>{try{p(!0);const s=re("google");window.location.href=s}catch(s){console.error("OAuth redirect error:",s),p(!1),a({title:"Configuration Error",description:ne.CONFIGURATION_ERROR,status:"error",duration:5e3,isClosable:!0})}},P=async s=>{s.preventDefault(),m(!0);const t={email:g,password:b,rememberMe:k};try{const o=await O(t);if(!o.success){a({title:"Login Failed",description:o.message||"Invalid email or password.",duration:1e3,status:"error",isClosable:!0}),m(!1);return}const i=o.user,F=o.token,w=i.id;localStorage.setItem("userId",w),u(""),h(""),(await f(w,F)).status===!1?x("/explore/category"):window.open("/dashboard","_blank"),U(!0)}catch(o){console.error("Error during login:",o),alert("Invalid credentials. Please try again.")}finally{m(!1)}};return e.jsx(se,{children:e.jsxs(n,{p:{base:"16px",sm:"20px",md:"24px"},mt:{base:"130px",sm:"150px",md:"160px"},mb:{base:"20px",sm:"20px",md:"30px"},borderRadius:"20px",boxShadow:"2xl",maxW:{base:"90%",md:"90%",lg:"90%"},width:{base:"320px",sm:"380px",md:"440px"},bgGradient:"linear(to-br, #FFFFFF00 0%, #FFFFFF20 100%)",border:"1px solid #FFFFFF35",backdropFilter:"blur(24px)",mx:"auto",children:[e.jsx(J,{maxW:"100%",color:"#F49040",textAlign:"center",mt:{base:"0px",sm:"2px",md:"4px"},mb:{base:"10px",sm:"12px",md:"16px"},fontSize:{base:"18px",sm:"20px",md:"22px"},fontWeight:"bold",children:"Login To Your Account"})," ",e.jsxs(X,{spacing:{base:"8px",sm:"10px",md:"12px"},align:"stretch",as:"form",onSubmit:P,children:[e.jsxs(C,{isRequired:!0,children:[e.jsx(y,{color:"#FFF",fontSize:{base:"11px",sm:"12px"},mb:1,ml:3,fontWeight:"light",children:"Enter Email Address"}),e.jsxs(I,{children:[e.jsx(R,{py:{base:"18px",sm:"20px",md:"22px"},mx:{base:"10px",sm:"12px",md:"16px"},children:e.jsx(n,{color:"#F49040",fontSize:{base:"16px",sm:"18px",md:"20px"},children:e.jsx(K,{})})}),e.jsx(E,{placeholder:"Enter your email",bg:"white",py:{base:"18px",sm:"20px",md:"22px"},paddingLeft:{base:"48px",sm:"54px",md:"60px"},fontSize:{base:"13px",sm:"14px",md:"16px"},borderRadius:"30px",border:"1px solid #CED4D3",_focus:{outline:"none",boxShadow:"0px 0px 12px #F49040",border:"1px solid #F49040",bg:"white"},value:g,type:"email",onChange:s=>u(s.target.value)})]})]}),e.jsxs(C,{isRequired:!0,children:[e.jsx(y,{color:"#FFF",fontSize:{base:"11px",sm:"12px"},mb:1,ml:3,fontWeight:"light",children:"Enter Password"}),e.jsxs(I,{children:[e.jsx(R,{py:{base:"18px",sm:"20px",md:"22px"},mx:{base:"10px",sm:"12px",md:"16px"},children:e.jsx(n,{color:"#F49040",fontSize:{base:"16px",sm:"18px",md:"20px"},children:e.jsx(Q,{})})}),e.jsx(E,{placeholder:"Enter your password",type:d?"text":"password",bg:"white",py:{base:"18px",sm:"20px",md:"22px"},paddingLeft:{base:"48px",sm:"54px",md:"60px"},paddingRight:{base:"48px",sm:"54px",md:"60px"},fontSize:{base:"13px",sm:"14px",md:"16px"},border:"1px solid #CED4D3",_focus:{outline:"none",boxShadow:"0px 0px 12px #F49040",border:"1px solid #F49040",bg:"white"},borderRadius:"30px",value:b,onChange:s=>h(s.target.value)}),e.jsx(ae,{width:"4rem",py:{base:"18px",sm:"20px",md:"22px"},children:d?e.jsx(n,{fontSize:{base:"16px",sm:"18px",md:"20px"},children:e.jsx(Z,{color:"#F49040",onClick:c,cursor:"pointer"})}):e.jsx(n,{fontSize:{base:"16px",sm:"18px",md:"20px"},children:e.jsx(ee,{color:"#F49040",onClick:c,cursor:"pointer"})})})]})]}),e.jsxs(Y,{flexDirection:{base:"column-reverse",sm:"row"},alignItems:{base:"center",sm:"center"},justifyContent:"space-between",gap:"5px",mx:3,children:[e.jsx(ie,{colorScheme:"orange.400",color:"#FFFFFF",size:{base:"xs",sm:"sm",md:"md"},textAlign:"left",onChange:s=>z(s.target.checked),children:e.jsx(l,{fontSize:{base:"10px",sm:"11px",md:"12px"},children:"Remember me"})}),e.jsx(l,{color:"#F49040",cursor:"pointer",fontSize:{base:"11px",sm:"12px",md:"14px"},onClick:()=>x("/forgotpasswordemail"),children:"Forgot Password?"})]}),e.jsx(S,{isLoading:_,loadingText:"Logging in",spinnerPlacement:"start",bg:"#F49040",color:"white",width:"full",borderRadius:"30px",type:"submit",h:{base:"32px",sm:"36px",md:"42px"},fontSize:{base:"13px",sm:"14px",md:"16px"},_focus:{outline:"none",boxShadow:"none"},_hover:{border:"2px solid #F49040",color:"#F49040",bg:"none",boxShadow:"0px 2px 5px #F49040"},children:"Log In"}),e.jsxs(l,{color:"#FFFFFF",textAlign:"center",fontSize:{base:"10px",sm:"11px",md:"12px"},fontWeight:"light",children:["Don't have an account?"," ",e.jsx(l,{as:"span",color:"#F49040",onClick:W,cursor:"pointer",fontSize:{base:"11px",sm:"12px",md:"14px"},fontWeight:"semibold",ml:"2px",children:"Register"})]})]}),e.jsxs(le,{my:3,children:[e.jsx(L,{borderColor:"white",width:{base:"78px",sm:"112px",md:"142px"}}),e.jsx(l,{color:"white",mx:{base:"12px",sm:"14px",md:"16px"},fontSize:{base:"12px",sm:"14px",md:"16px"},fontWeight:"semibold",children:"OR"}),e.jsx(L,{borderColor:"white",width:{base:"78px",sm:"112px",md:"142px"}})]}),e.jsx(n,{maxW:{base:"95%",md:"580px"},width:"full",display:"flex",justifyContent:"center",children:e.jsxs(S,{variant:"outline",p:{base:"12px",sm:"14px",md:"18px"},maxW:"220px",maxH:"42px",width:"100%",bgColor:"white",borderRadius:"10px",mx:"auto",mb:"10px",fontSize:{base:"11px",sm:"13px",md:"14px"},isLoading:v,loadingText:"Connecting...",_focus:{outline:"none",boxShadow:"none",bg:"white"},_hover:{border:"none"},onClick:N,children:[e.jsx(n,{as:oe,boxSize:{base:"20px",sm:"24px",md:"28px"},mr:{base:"5px",sm:"6px"},fontSize:"12px"}),"Continue with Google"]})})]})})};export{Le as default};
